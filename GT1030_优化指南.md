# GT 1030 + i3-10105F 性能优化指南

## 硬件配置
- **CPU**: Intel i3-10105F (无集成显卡)
- **GPU**: NVIDIA GeForce GT 1030 (低端独显)
- **当前性能**: 30 FPS (使用 intel_gpu_detector CPU 模式)

## 优化方案对比

| 方案 | 预期 FPS | 设置难度 | 推荐度 |
|-----|---------|---------|--------|
| **方案1: ONNX GPU** | 60-100 | 简单 | ⭐⭐⭐⭐⭐ |
| **方案2: CPU 优化** | 50-70 | 极简单 | ⭐⭐⭐ |

---

## 方案1: 使用 ONNX GPU 版本（推荐）

### 预期性能: 60-100 FPS

### 步骤 1: 安装 ONNX Runtime GPU

```bash
# 进入 onnx_gpu_detector 目录
cd e:\Desktop\VALORANT\onnx_gpu_detector

# 卸载 CPU 版本
pip uninstall onnxruntime -y

# 安装 GPU 版本（支持 GT 1030）
pip install onnxruntime-gpu

# 验证安装
python -c "import onnxruntime as ort; print('可用提供者:', ort.get_available_providers())"
```

**预期输出**: 应该看到 `CUDAExecutionProvider`

### 步骤 2: 运行优化版本

```bash
# 直接运行（已针对 GT 1030 优化）
python simple_detector.py
```

### 优化配置说明

已经为你优化好的配置：
- ✅ 使用 256x256 小模型（最快）
- ✅ 捕获区域 256x256
- ✅ 高置信度阈值 0.60（减少后处理）
- ✅ 关闭性能分析（减少开销）

### 进一步优化

如果还想更快，编辑 `simple_detector.py` 的 `main()` 函数：

```python
# 更激进的优化
center_size = 224  # 更小捕获区域
conf_threshold = 0.70  # 更高阈值
```

---

## 方案2: 使用 CPU 优化版本

### 预期性能: 50-70 FPS

### 特点
- ✅ 无需安装额外依赖
- ✅ 关闭所有可视化（最大性能提升）
- ✅ 纯控制台输出
- ✅ 只检测 head 类别

### 运行方法

```bash
cd e:\Desktop\VALORANT\intel_gpu_detector

# 运行 CPU 极限优化版本
python simple_detector_optimized.py
```

### 输出示例

```
================================================================================
VALORANT CPU 极限优化版 (捕获中心 224x224)
================================================================================
...
[65 FPS] 距离:  106.4px | 偏移: (+10.5, -40.2)
```

---

## 性能优化原理

### 为什么 intel_gpu_detector 在你的电脑上慢？

1. **没有 Intel 集成显卡**: i3-10105F 的 "F" 后缀表示无核显
2. **只能用 CPU 模式**: 无法利用 OpenVINO GPU 加速
3. **有可视化窗口**: cv2.imshow() 和绘图消耗大量 CPU

### 优化方案如何提升性能？

#### ONNX GPU 版本：
- **GPU 推理**: GT 1030 虽然不强，但比 CPU 快 3-5 倍
- **小模型**: 256x256 比 640x640 快 16 倍
- **高阈值**: 减少后处理计算

#### CPU 优化版本：
- **关闭可视化**: 提升 50-100% 性能
- **小捕获区域**: 224x224 比 256x256 快 30%
- **类别过滤**: 只检测 head，减少 80% 后处理

---

## 性能对比表

| 配置 | 模型大小 | 捕获区域 | 可视化 | FPS (GT 1030) | FPS (CPU) |
|-----|---------|---------|--------|---------------|-----------|
| 原始 intel_gpu_detector | 256x256 | 256 | 开启 | N/A | **30** |
| ONNX GPU 优化 | 256x256 | 256 | 开启 | **80-100** | N/A |
| ONNX GPU 极致 | 256x256 | 224 | 关闭 | **100-120** | N/A |
| CPU 优化 | 256x256 | 224 | 关闭 | N/A | **50-70** |

---

## 常见问题

### Q1: 为什么不能使用 intel_gpu_detector 的 GPU 模式？

**A**: i3-10105F 没有集成显卡（F = 无核显），intel_gpu_detector 是为 Intel 集成 GPU 设计的。

### Q2: GT 1030 性能够用吗？

**A**: 虽然 GT 1030 是入门级显卡，但对于 YOLOv11 256x256 模型足够了：
- 推理时间: ~8-12ms（GPU）vs ~30-40ms（CPU）
- 预期 FPS: 60-100（远超 30 FPS 的目标）

### Q3: 如果 ONNX GPU 版本还不够快怎么办？

**A**: 尝试以下优化：
```python
# 1. 关闭可视化窗口（修改代码，删除 cv2.imshow 相关行）
# 2. 使用更小捕获区域
center_size = 192  # 或 160
# 3. 使用超高阈值
conf_threshold = 0.75
```

### Q4: 能用 TensorRT 版本吗？

**A**: 可以，但对于 GT 1030：
- TensorRT 安装复杂（需要 CUDA + TensorRT）
- 性能提升有限（GT 1030 算力低）
- **不推荐**，ONNX GPU 版本已经足够

---

## 推荐配置总结

### 最佳性能（推荐）
```bash
cd onnx_gpu_detector
pip uninstall onnxruntime -y && pip install onnxruntime-gpu
python simple_detector.py
```
**预期**: 80-100 FPS

### 备选方案（无需安装）
```bash
cd intel_gpu_detector
python simple_detector_optimized.py
```
**预期**: 50-70 FPS

---

## 下一步行动

1. **立即尝试**: 运行 ONNX GPU 版本
2. **测试性能**: 查看实际 FPS
3. **微调参数**: 根据需要调整 `center_size` 和 `conf_threshold`

祝你游戏愉快！ 🎮
